function bindExplorePremium(){$(".explorePremium").click(function(){var standardTripUniqueId=$(this).data("tripuniqueid"),tripName=$(this).data("title"),tripCategory=$(this).data("category");_gaq.push(["_trackEvent","Premium","Explore",tripName]),$.ajax({type:"GET",url:"/trip/premium/usps/"+standardTripUniqueId,contentType:"application/json; charset=utf-8",success:function(response){handleExplorePremiumResponse(response,tripName,tripCategory)},error:function(e){console.error("Error: "+e)}})})}function handleExplorePremiumResponse(response,tripName,tripCategory){if(response&&response.usps){for(var premiumTripUspDiffModal=$("#premiumTripUspDiffModal"),tbody=premiumTripUspDiffModal.find("table.premiumTripUspDiffTable").find("tbody").html(""),usps=response.usps,i=0;i<usps.length;i++){for(var usp=usps[i],mobileRowHtml,rowHtml='<tr class="mobileOnly"><td></td><td colspan="2">'+usp.categoryName+"</td></tr>"+"<tr><td>"+usp.categoryName+"</td><td><ul>",j=0;j<usp.premiumTripUsps.length;j++)rowHtml=rowHtml+"<li>"+usp.premiumTripUsps[j];rowHtml+="</ul></td><td><ul>";for(var k=0;k<usp.standardTripUsps.length;k++)rowHtml=rowHtml+"<li>"+usp.standardTripUsps[k];rowHtml+="</ul></td></tr>",tbody.append(rowHtml)}var actionButtonRowHtml='<tr class="actionRow"><td></td><td><a class="submit-query-link premiumTripLink" href="/trip/'+response.premiumTripSlug+'" target="_blank" onclick="trackGaEvent(\'View Premium Trip\',\''+tripName+'\')">Premium Trip</a></td><td><a class="submit-query-link standardTripLink" href="/trip/'+response.standardTripSlug+'" target="_blank" onclick="trackGaEvent(\'View Standard Trip\',\''+tripName+"')\">Standard Trip</a></td></tr>";tbody.append(actionButtonRowHtml);var top=$("html").offset().top,actionRow=tbody.find("tr.actionRow");premiumTripUspDiffModal.find(".modal-head").find("h4").html(tripName),tripCategory?"STANDARD"===tripCategory?actionRow.find("a.standardTripLink").hide():actionRow.find("a.premiumTripLink").hide():actionRow.find("a").show(),premiumTripUspDiffModal.foundation("reveal","open"),premiumTripUspDiffModal.css("top",top)}}function trackGaEvent(category,tripName){_gaq.push(["_trackEvent","Premium",category,tripName])}jQuery(document).ready(function($){bindExplorePremium()});